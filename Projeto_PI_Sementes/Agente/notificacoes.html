<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Semeia Web - Notificações</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root {
      --cor-primaria: #2e7d32;
      --cor-secundaria: #4caf50;
      --cor-fundo: #f4f6f5;
      --texto-principal: #333;
      --branco: #fff;
      --verde-claro: #e8f5e8;
      --verde-escuro: #0d5032;
      --verde-primario: #146c43;
      --cinza-claro: #f8f9fa;
      --cinza-medio: #e9ecef;
    }

    body {
      background-color: #f5f7f5;
      font-family: "Poppins", "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
    }

    /* ===== Sidebar ===== */
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #146c43;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px 10px;
      position: fixed;
      transition: width 0.3s ease;
      overflow: hidden;
      z-index: 1000;
    }

    .sidebar.collapsed { width: 80px; }

    .toggler {
      font-size: 1.5rem;
      cursor: pointer;
      color: #fff;
      align-self: flex-start;
      margin-bottom: 15px;
      margin-left: 5px;
      transition: all 0.3s ease;
    }

    .sidebar.collapsed .toggler {
      align-self: center;
      margin: 15px 0;
    }

    .toggler:hover { transform: scale(1.1); }

    .logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }

    .logo img { width: 45px; transition: all 0.3s ease; }
    .logo h4 { margin: 8px 0 0 0; color: #fff; transition: opacity 0.3s ease; }

    .sidebar.collapsed .logo h4 {
      opacity: 0;
      height: 0;
      overflow: hidden;
    }

    .profile {
      text-align: center;
      margin-bottom: 30px;
      transition: all 0.3s ease;
    }

    .profile img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: 2px solid white;
      margin-bottom: 8px;
      transition: all 0.3s ease;
    }

    .sidebar.collapsed .profile img {
      width: 45px;
      height: 45px;
    }

    .sidebar.collapsed .profile h6 {
      display: none;
    }

    .sidebar a {
      color: white;
      text-decoration: none;
      width: 100%;
      padding: 12px 20px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: background 0.3s ease, padding 0.3s ease;
    }

    .sidebar a:hover,
    .sidebar a.active { background-color: #0d5032; }

    .sidebar.collapsed a {
      justify-content: center;
      padding: 12px 0;
    }

    .sidebar.collapsed a span { display: none; }

    .logout {
      margin-top: auto;
      width: 100%;
      border-top: 1px solid rgba(255,255,255,0.2);
      padding-top: 15px;
    }

    .logout a {
      color: white;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 10px;
      transition: background 0.3s ease;
    }

    .logout a:hover { background-color: #0d5032; }

    .sidebar.collapsed .logout a {
      justify-content: center;
      padding: 12px 0;
    }

    .sidebar.collapsed .logout a span { display: none; }

    /* ===== Conteúdo Principal ===== */
    .main-content {
      margin-left: 250px;
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: margin-left 0.3s ease, width 0.3s ease;
      width: calc(100% - 250px);
    }

    .sidebar.collapsed ~ .main-content {
      margin-left: 80px;
      width: calc(100% - 80px);
    }

    header {
      background-color: var(--branco);
      padding: 15px 25px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    header h4 { margin: 0; color: var(--texto-principal); }

    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .user-info img {
      width: 35px;
      height: 35px;
      border-radius: 50%;
    }

    main {
      flex: 1;
      padding: 25px;
      background-color: var(--cor-fundo);
    }

    /* ===== Layout da Página ===== */
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .page-title {
      color: #064420;
      font-weight: 700;
      margin-bottom: 0;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .page-title i {
      color: var(--verde-primario);
    }

    .btn-custom {
      background: var(--verde-primario);
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-custom:hover {
      background: var(--verde-escuro);
      transform: translateY(-2px);
    }

    .btn-outline-custom {
      border: 2px solid var(--verde-primario);
      color: var(--verde-primario);
      background: white;
      padding: 10px 25px;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .btn-outline-custom:hover {
      background: var(--verde-claro);
    }

    /* ===== Filtros e Estatísticas ===== */
    .filters-container {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      margin-bottom: 25px;
    }

    .filters-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .filters-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      border-left: 4px solid var(--verde-primario);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .stat-card.active {
      background: var(--verde-claro);
      border-left-color: var(--verde-escuro);
    }

    .stat-card .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .stat-card .icon {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: white;
    }

    .stat-card .icon.todas { background: linear-gradient(135deg, #3498db, #2980b9); }
    .stat-card .icon.nao-lidas { background: linear-gradient(135deg, #e74c3c, #c0392b); }
    .stat-card .icon.urgentes { background: linear-gradient(135deg, #f39c12, #d35400); }
    .stat-card .icon.sistema { background: linear-gradient(135deg, #9b59b6, #8e44ad); }

    .stat-card .number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--verde-primario);
      margin-bottom: 5px;
    }

    .stat-card .label {
      color: #666;
      font-size: 0.9rem;
    }

    /* ===== Lista de Notificações ===== */
    .notifications-container {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.08);
      margin-bottom: 30px;
    }

    .notifications-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .notifications-header h5 {
      margin: 0;
      color: var(--texto-principal);
      font-weight: 600;
    }

    .notifications-actions {
      display: flex;
      gap: 10px;
    }

    .notifications-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .notification-item {
      display: flex;
      gap: 15px;
      padding: 20px;
      border-radius: 10px;
      background: var(--cinza-claro);
      border-left: 4px solid #ddd;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .notification-item:hover {
      transform: translateX(5px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .notification-item.unread {
      background: white;
      border-left-color: var(--verde-primario);
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }

    .notification-item.urgent {
      border-left-color: #e74c3c;
      background: #fff5f5;
    }

    .notification-item.important {
      border-left-color: #f39c12;
      background: #fffbf0;
    }

    .notification-item.system {
      border-left-color: #3498db;
      background: #f0f8ff;
    }

    .notification-icon {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .notification-icon.info { background: rgba(52, 152, 219, 0.1); color: #3498db; }
    .notification-icon.warning { background: rgba(243, 156, 18, 0.1); color: #f39c12; }
    .notification-icon.alert { background: rgba(231, 76, 60, 0.1); color: #e74c3c; }
    .notification-icon.success { background: rgba(46, 204, 113, 0.1); color: #2ecc71; }
    .notification-icon.system { background: rgba(155, 89, 182, 0.1); color: #9b59b6; }

    .notification-content {
      flex: 1;
    }

    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .notification-title {
      font-weight: 600;
      color: var(--texto-principal);
      margin: 0;
      font-size: 1rem;
    }

    .notification-time {
      font-size: 0.85rem;
      color: #999;
      white-space: nowrap;
    }

    .notification-message {
      color: #666;
      margin: 0 0 10px 0;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    .notification-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .btn-sm {
      padding: 5px 10px;
      font-size: 0.8rem;
    }

    .notification-badge {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #e74c3c;
    }

    .notification-badge.unread {
      background: #e74c3c;
      animation: pulse 2s infinite;
    }

    /* ===== Badges ===== */
    .badge-notification {
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .badge-urgent { background-color: #f8d7da; color: #721c24; }
    .badge-important { background-color: #fff3cd; color: #856404; }
    .badge-info { background-color: #d1ecf1; color: #0c5460; }
    .badge-system { background-color: #e2e3e5; color: #383d41; }

    /* ===== Modal de Detalhes ===== */
    .modal-header {
      background-color: var(--verde-primario);
      color: white;
    }

    .notification-details {
      padding: 20px 0;
    }

    .details-section {
      margin-bottom: 25px;
    }

    .details-section h6 {
      color: var(--verde-primario);
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--verde-claro);
    }

    .details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
    }

    .detail-label {
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 5px;
    }

    .detail-value {
      font-weight: 600;
      color: var(--texto-principal);
    }

    .notification-body {
      background: var(--cinza-claro);
      border-radius: 8px;
      padding: 20px;
      margin-top: 15px;
    }

    /* ===== Animações ===== */
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== Estados Vazios ===== */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .empty-state i {
      font-size: 4rem;
      color: #ddd;
      margin-bottom: 20px;
    }

    .empty-state h5 {
      color: #999;
      margin-bottom: 10px;
    }

    /* ===== Responsividade ===== */
    @media (max-width: 768px) {
      .filters-grid {
        grid-template-columns: 1fr;
      }
      
      .stats-cards {
        grid-template-columns: 1fr;
      }
      
      .notifications-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .notification-header {
        flex-direction: column;
        gap: 5px;
      }
      
      .notification-actions {
        flex-wrap: wrap;
      }
    }
  </style>
</head>
<body>
  <!-- ===== Sidebar ===== -->
  <div class="sidebar" id="sidebar">
    <i class="bi bi-list toggler" id="toggle-btn"></i>

    <div class="logo">
      <img src="img/logo2.png" alt="Semeia Web">
      <h4>Semeia Web</h4>
    </div>

    <div class="profile">
      <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Usuário">
      <h6>João Silva</h6>
    </div>

    <a href="dashboard_agente.html"><i class="bi bi-house-fill"></i><span>Início</span></a>
    <a href="registrar_entrega.html"><i class="bi bi-check-circle"></i><span>Registrar Entrega</span></a>
    <a href="rotas_distribuicao.html"><i class="bi bi-geo-alt"></i><span>Rotas de Distribuição</span></a>
    <a href="ordens_expedicao.html"><i class="bi bi-clipboard-check"></i><span>Ordens de Expedição</span></a>
    <a href="historico_entregas.html"><i class="bi bi-clock-history"></i><span>Histórico de Entregas</span></a>
    <a href="rastreamento.html"><i class="bi bi-search"></i><span>Rastreamento</span></a>
    <a href="notificacoes.html" class="active"><i class="bi bi-bell"></i><span>Notificações</span></a>
    <a href="configuracao.html"><i class="bi bi-gear"></i><span>Configurações</span></a>

    <div class="logout">
      <a href="../login.html"><i class="bi bi-box-arrow-right"></i><span>Sair</span></a>
    </div>
  </div>

  <!-- ===== Conteúdo Principal ===== -->
  <div class="main-content">
    <header>
      <h4>Central de Notificações</h4>
      <div class="user-info">
        <span>João Silva</span>
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Usuário">
      </div>
    </header>

    <main>
      <div class="container-fluid">
        <!-- Cabeçalho da Página -->
        <div class="page-header">
          <h1 class="page-title"><i class="bi bi-bell"></i> Notificações</h1>
          <div class="d-flex gap-2">
            <button class="btn btn-outline-custom" onclick="markAllAsRead()">
              <i class="bi bi-check-all"></i> Marcar Todas como Lidas
            </button>
            <button class="btn btn-custom" onclick="openSettings()">
              <i class="bi bi-gear"></i> Configurações
            </button>
          </div>
        </div>

        <!-- Filtros -->
        <div class="filters-container">
          <div class="filters-header">
            <h5 class="mb-0">Filtros</h5>
            <button class="btn btn-sm btn-outline-custom" onclick="clearFilters()">
              <i class="bi bi-arrow-clockwise"></i> Limpar
            </button>
          </div>
          <div class="filters-grid">
            <div>
              <label class="form-label">Tipo</label>
              <select class="form-select" id="type-filter">
                <option value="">Todos os tipos</option>
                <option value="urgent">Urgentes</option>
                <option value="important">Importantes</option>
                <option value="info">Informativas</option>
                <option value="system">Sistema</option>
              </select>
            </div>
            <div>
              <label class="form-label">Status</label>
              <select class="form-select" id="status-filter">
                <option value="">Todos</option>
                <option value="unread">Não lidas</option>
                <option value="read">Lidas</option>
              </select>
            </div>
            <div>
              <label class="form-label">Período</label>
              <select class="form-select" id="period-filter">
                <option value="all">Todo período</option>
                <option value="today">Hoje</option>
                <option value="week">Esta semana</option>
                <option value="month">Este mês</option>
              </select>
            </div>
            <div>
              <label class="form-label">Ordenar por</label>
              <select class="form-select" id="sort-filter">
                <option value="newest">Mais recentes</option>
                <option value="oldest">Mais antigas</option>
                <option value="priority">Prioridade</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Estatísticas -->
        <div class="stats-cards">
          <div class="stat-card active" onclick="filterByType('all')">
            <div class="header">
              <div>
                <div class="number">24</div>
                <div class="label">Total de Notificações</div>
              </div>
              <div class="icon todas">
                <i class="bi bi-bell"></i>
              </div>
            </div>
          </div>

          <div class="stat-card" onclick="filterByType('unread')">
            <div class="header">
              <div>
                <div class="number">8</div>
                <div class="label">Não Lidas</div>
              </div>
              <div class="icon nao-lidas">
                <i class="bi bi-bell-fill"></i>
              </div>
            </div>
          </div>

          <div class="stat-card" onclick="filterByType('urgent')">
            <div class="header">
              <div>
                <div class="number">3</div>
                <div class="label">Urgentes</div>
              </div>
              <div class="icon urgentes">
                <i class="bi bi-exclamation-triangle"></i>
              </div>
            </div>
          </div>

          <div class="stat-card" onclick="filterByType('system')">
            <div class="header">
              <div>
                <div class="number">5</div>
                <div class="label">Sistema</div>
              </div>
              <div class="icon sistema">
                <i class="bi bi-gear"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Lista de Notificações -->
        <div class="notifications-container">
          <div class="notifications-header">
            <h5>Notificações Recebidas</h5>
            <div class="notifications-actions">
              <button class="btn btn-outline-custom btn-sm" onclick="refreshNotifications()">
                <i class="bi bi-arrow-clockwise"></i> Atualizar
              </button>
              <button class="btn btn-outline-custom btn-sm" onclick="clearAllNotifications()">
                <i class="bi bi-trash"></i> Limpar Todas
              </button>
            </div>
          </div>

          <div class="notifications-list" id="notifications-list">
            <!-- Notificação 1 - Urgente -->
            <div class="notification-item unread urgent" onclick="viewNotification(1)">
              <div class="notification-icon alert">
                <i class="bi bi-exclamation-triangle"></i>
              </div>
              <div class="notification-content">
                <div class="notification-header">
                  <h6 class="notification-title">Estoque Crítico - Milho</h6>
                  <span class="notification-time">Há 2 horas</span>
                </div>
                <p class="notification-message">
                  O estoque de milho está abaixo do nível mínimo. Restam apenas 45kg disponíveis.
                  Solicite novo lote com urgência.
                </p>
                <div class="notification-actions">
                  <span class="badge-notification badge-urgent">Urgente</span>
                  <button class="btn btn-sm btn-outline-custom" onclick="event.stopPropagation(); resolveStockIssue()">
                    <i class="bi bi-cart-plus"></i> Solicitar Lote
                  </button>
                </div>
              </div>
              <div class="notification-badge unread"></div>
            </div>

            <!-- Notificação 2 - Importante -->
            <div class="notification-item unread important" onclick="viewNotification(2)">
              <div class="notification-icon warning">
                <i class="bi bi-clock"></i>
              </div>
              <div class="notification-content">
                <div class="notification-header">
                  <h6 class="notification-title">Entrega Atrasada</h6>
                  <span class="notification-time">Há 5 horas</span>
                </div>
                <p class="notification-message">
                  A entrega #ORD-2024-0018 está atrasada. Clique para ver detalhes e atualizar o status.
                </p>
                <div class="notification-actions">
                  <span class="badge-notification badge-important">Importante</span>
                  <button class="btn btn-sm btn-outline-custom" onclick="event.stopPropagation(); viewOrderDetails('ORD-2024-0018')">
                    <i class="bi bi-eye"></i> Ver Detalhes
                  </button>
                </div>
              </div>
              <div class="notification-badge unread"></div>
            </div>

            <!-- Notificação 3 - Sistema -->
            <div class="notification-item unread system" onclick="viewNotification(3)">
              <div class="notification-icon system">
                <i class="bi bi-arrow-clockwise"></i>
              </div>
              <div class="notification-content">
                <div class="notification-header">
                  <h6 class="notification-title">Sincronização Concluída</h6>
                  <span class="notification-time">Hoje, 08:30</span>
                </div>
                <p class="notification-message">
                  Todas as entregas realizadas offline foram sincronizadas com sucesso com o servidor.
                </p>
                <div class="notification-actions">
                  <span class="badge-notification badge-system">Sistema</span>
                  <button class="btn btn-sm btn-outline-custom" onclick="event.stopPropagation(); viewSyncDetails()">
                    <i class="bi bi-list-check"></i> Ver Relatório
                  </button>
                </div>
              </div>
              <div class="notification-badge unread"></div>
            </div>

            <!-- Notificação 4 - Informativa -->
            <div class="notification-item" onclick="viewNotification(4)">
              <div class="notification-icon info">
                <i class="bi bi-info-circle"></i>
              </div>
              <div class="notification-content">
                <div class="notification-header">
                  <h6 class="notification-title">Nova Rota Disponível</h6>
                  <span class="notification-time">Ontem, 16:45</span>
                </div>
                <p class="notification-message">
                  Nova rota de distribuição otimizada disponível para a zona rural de Petrolina.
                </p>
                <div class="notification-actions">
                  <span class="badge-notification badge-info">Informativa</span>
                  <button class="btn btn-sm btn-outline-custom" onclick="event.stopPropagation(); viewNewRoute()">
                    <i class="bi bi-geo-alt"></i> Ver Rota
                  </button>
                </div>
              </div>
            </div>

            <!-- Notificação 5 - Sucesso -->
            <div class="notification-item" onclick="viewNotification(5)">
              <div class="notification-icon success">
                <i class="bi bi-check-circle"></i>
              </div>
              <div class="notification-content">
                <div class="notification-header">
                  <h6 class="notification-title">Entrega Confirmada</h6>
                  <span class="notification-time">Ontem, 14:20</span>
                </div>
                <p class="notification-message">
                  A entrega #ORD-2024-0015 para Maria Santos foi confirmada com sucesso.
                </p>
                <div class="notification-actions">
                  <span class="badge-notification badge-info">Concluída</span>
                  <button class="btn btn-sm btn-outline-custom" onclick="event.stopPropagation(); downloadReceipt('ORD-2024-0015')">
                    <i class="bi bi-download"></i> Comprovante
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Estado Vazio -->
          <div class="empty-state" id="empty-state" style="display: none;">
            <i class="bi bi-bell-slash"></i>
            <h5>Nenhuma notificação encontrada</h5>
            <p class="text-muted">Tente ajustar os filtros ou verifique novamente mais tarde.</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal de Detalhes da Notificação -->
  <div class="modal fade" id="notificationModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Detalhes da Notificação</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="notification-details">
            <div class="details-section">
              <h6><i class="bi bi-info-circle"></i> Informações da Notificação</h6>
              <div class="details-grid">
                <div class="detail-item">
                  <span class="detail-label">Título</span>
                  <span class="detail-value" id="detail-title">Estoque Crítico - Milho</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Tipo</span>
                  <span class="badge-notification badge-urgent" id="detail-type">Urgente</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Data e Hora</span>
                  <span class="detail-value" id="detail-time">15/10/2024 - 10:30</span>
                </div>
                <div class="detail-item">
                  <span class="detail-label">Status</span>
                  <span class="detail-value" id="detail-status">Não lida</span>
                </div>
              </div>
            </div>

            <div class="details-section">
              <h6><i class="bi bi-chat-left-text"></i> Mensagem Completa</h6>
              <div class="notification-body">
                <p id="detail-message">
                  O estoque de milho está abaixo do nível mínimo estabelecido. Restam apenas 45kg disponíveis 
                  no centro de distribuição. Esta situação pode impactar as entregas programadas para esta semana.
                  
                  Recomendamos solicitar um novo lote com urgência junto ao fornecedor autorizado.
                </p>
              </div>
            </div>

            <div class="details-section">
              <h6><i class="bi bi-lightning"></i> Ações Recomendadas</h6>
              <div class="d-flex gap-2 flex-wrap">
                <button class="btn btn-custom" onclick="resolveStockIssue()">
                  <i class="bi bi-cart-plus"></i> Solicitar Novo Lote
                </button>
                <button class="btn btn-outline-custom" onclick="checkAlternativeStock()">
                  <i class="bi bi-search"></i> Ver Estoque Alternativo
                </button>
                <button class="btn btn-outline-custom" onclick="contactSupplier()">
                  <i class="bi bi-telephone"></i> Contatar Fornecedor
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-custom" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-custom" onclick="markAsRead()">
            <i class="bi bi-check"></i> Marcar como Lida
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Controle da sidebar
    const sidebar = document.getElementById("sidebar");
    const toggleBtn = document.getElementById("toggle-btn");
    toggleBtn.addEventListener("click", () => {
      sidebar.classList.toggle("collapsed");
    });

    // Variáveis de estado
    let currentFilter = 'all';
    let notifications = [];

    // Funções de filtro
    function filterByType(type) {
      currentFilter = type;
      
      // Atualizar estatísticas ativas
      document.querySelectorAll('.stat-card').forEach(card => {
        card.classList.remove('active');
      });
      event.currentTarget.classList.add('active');
      
      // Aplicar filtro
      applyFilters();
    }

    function applyFilters() {
      const typeFilter = document.getElementById('type-filter').value;
      const statusFilter = document.getElementById('status-filter').value;
      const periodFilter = document.getElementById('period-filter').value;
      const sortFilter = document.getElementById('sort-filter').value;
      
      const notifications = document.querySelectorAll('.notification-item');
      let visibleCount = 0;
      
      notifications.forEach(notification => {
        let shouldShow = true;
        
        // Filtro por tipo
        if (typeFilter && !notification.classList.contains(typeFilter)) {
          shouldShow = false;
        }
        
        // Filtro por status
        if (statusFilter === 'unread' && !notification.classList.contains('unread')) {
          shouldShow = false;
        } else if (statusFilter === 'read' && notification.classList.contains('unread')) {
          shouldShow = false;
        }
        
        // Filtro global
        if (currentFilter === 'unread' && !notification.classList.contains('unread')) {
          shouldShow = false;
        } else if (currentFilter === 'urgent' && !notification.classList.contains('urgent')) {
          shouldShow = false;
        } else if (currentFilter === 'system' && !notification.classList.contains('system')) {
          shouldShow = false;
        }
        
        if (shouldShow) {
          notification.style.display = 'flex';
          visibleCount++;
        } else {
          notification.style.display = 'none';
        }
      });
      
      // Mostrar/ocultar estado vazio
      const emptyState = document.getElementById('empty-state');
      if (visibleCount === 0) {
        emptyState.style.display = 'block';
      } else {
        emptyState.style.display = 'none';
      }
    }

    // Event listeners para filtros
    document.getElementById('type-filter').addEventListener('change', applyFilters);
    document.getElementById('status-filter').addEventListener('change', applyFilters);
    document.getElementById('period-filter').addEventListener('change', applyFilters);
    document.getElementById('sort-filter').addEventListener('change', applyFilters);

    // Funções de ação
    function viewNotification(notificationId) {
      // Marcar como lida
      const notification = document.querySelector(`.notification-item:nth-child(${notificationId})`);
      notification.classList.remove('unread');
      notification.querySelector('.notification-badge')?.remove();
      
      // Atualizar contador
      updateUnreadCount();
      
      // Mostrar modal de detalhes
      const modal = new bootstrap.Modal(document.getElementById('notificationModal'));
      modal.show();
    }

    function markAsRead() {
      const modal = bootstrap.Modal.getInstance(document.getElementById('notificationModal'));
      modal.hide();
      showToast('Notificação marcada como lida', 'success');
    }

    function markAllAsRead() {
      if (confirm('Deseja marcar todas as notificações como lidas?')) {
        document.querySelectorAll('.notification-item.unread').forEach(notification => {
          notification.classList.remove('unread');
          notification.querySelector('.notification-badge')?.remove();
        });
        updateUnreadCount();
        showToast('Todas as notificações foram marcadas como lidas', 'success');
      }
    }

    function clearAllNotifications() {
      if (confirm('Deseja limpar todas as notificações? Esta ação não pode ser desfeita.')) {
        document.getElementById('notifications-list').innerHTML = '';
        document.getElementById('empty-state').style.display = 'block';
        updateUnreadCount();
        showToast('Todas as notificações foram removidas', 'success');
      }
    }

    function refreshNotifications() {
      showToast('Buscando novas notificações...', 'info');
      // Simular atualização
      setTimeout(() => {
        showToast('Notificações atualizadas', 'success');
      }, 1000);
    }

    function clearFilters() {
      document.getElementById('type-filter').value = '';
      document.getElementById('status-filter').value = '';
      document.getElementById('period-filter').value = 'all';
      document.getElementById('sort-filter').value = 'newest';
      
      document.querySelectorAll('.stat-card').forEach(card => {
        card.classList.remove('active');
      });
      document.querySelector('.stat-card:first-child').classList.add('active');
      currentFilter = 'all';
      
      applyFilters();
      showToast('Filtros limpos', 'info');
    }

    function openSettings() {
      showToast('Abrindo configurações de notificação...', 'info');
      // Em ambiente real, redirecionaria para configurações
    }

    // Funções de ação específicas
    function resolveStockIssue() {
      showToast('Redirecionando para solicitação de lote...', 'info');
      // Em ambiente real, redirecionaria para tela de solicitação
    }

    function viewOrderDetails(orderNumber) {
      showToast(`Abrindo detalhes da ordem ${orderNumber}...`, 'info');
      // Em ambiente real, redirecionaria para tela de ordens
    }

    function viewSyncDetails() {
      showToast('Abrindo relatório de sincronização...', 'info');
    }

    function viewNewRoute() {
      showToast('Abrindo nova rota...', 'info');
    }

    function downloadReceipt(orderNumber) {
      showToast(`Baixando comprovante da ordem ${orderNumber}...`, 'info');
    }

    function checkAlternativeStock() {
      showToast('Verificando estoque alternativo...', 'info');
    }

    function contactSupplier() {
      showToast('Abrindo contatos do fornecedor...', 'info');
    }

    // Funções utilitárias
    function updateUnreadCount() {
      const unreadCount = document.querySelectorAll('.notification-item.unread').length;
      const unreadBadge = document.querySelector('.notification-badge');
      
      // Atualizar badge na sidebar
      const sidebarBadge = document.querySelector('.sidebar .notification-badge');
      if (sidebarBadge) {
        sidebarBadge.textContent = unreadCount;
        if (unreadCount === 0) {
          sidebarBadge.style.display = 'none';
        } else {
          sidebarBadge.style.display = 'flex';
        }
      }
      
      // Atualizar estatística
      document.querySelector('.stat-card .icon.nao-lidas ~ .number').textContent = unreadCount;
    }

    // Função utilitária para mostrar toasts
    function showToast(message, type = 'info') {
      // Criar toast dinamicamente
      const toastContainer = document.createElement('div');
      toastContainer.innerHTML = `
        <div class="toast align-items-center text-white bg-${type === 'error' ? 'danger' : type === 'success' ? 'success' : 'info'} border-0 show" role="alert">
          <div class="d-flex">
            <div class="toast-body">
              <i class="bi bi-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-triangle' : 'info-circle'} me-2"></i>
              ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        </div>
      `;
      
      toastContainer.style.position = 'fixed';
      toastContainer.style.top = '20px';
      toastContainer.style.right = '20px';
      toastContainer.style.zIndex = '9999';
      
      document.body.appendChild(toastContainer);
      
      // Remover após 3 segundos
      setTimeout(() => {
        if (document.body.contains(toastContainer)) {
          document.body.removeChild(toastContainer);
        }
      }, 3000);
    }

    // Inicialização
    document.addEventListener('DOMContentLoaded', function() {
      updateUnreadCount();
      applyFilters();
    });
  </script>
</body>
</html>